(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{126:function(e,t,i){},127:function(e,t,i){},128:function(e,t,i){"use strict";i.r(t);var c=i(0),n=i(35),s=i.n(n),a=(i(80),i(27)),r=i.n(a),o=i(28),u=i(43),b=i(20),d=i(132),O=i(138),j=i(133),l=i(137),S=i(134),_=i(136),p=i(135),T=i(57),v=i(55),h=i(58),E=i(60),x=i(59),m=i(56),C=i(33),f=i(15);var A=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),i=t[0],n=t[1],s=Object(c.useState)(""),a=Object(b.a)(s,2),A=a[0],R=a[1],P=Object(c.useState)(""),N=Object(b.a)(P,2),D=N[0],I=N[1],g=Object(c.useState)(""),L=Object(b.a)(g,2),y=L[0],H=L[1],k=Object(c.useState)({}),K=Object(b.a)(k,2),W=K[0],U=K[1],F=Object(c.useState)({}),B=Object(b.a)(F,2),w=B[0],z=B[1],M=Object(c.useState)(!1),V=Object(b.a)(M,2),X=V[0],G=V[1],q=Object(c.useState)(!1),J=Object(b.a)(q,2),Z=J[0],Q=J[1],$=Object(c.useState)(!1),Y=Object(b.a)($,2),ee=Y[0],te=Y[1],ie=Object(c.useState)(!1),ce=Object(b.a)(ie,2),ne=ce[0],se=ce[1],ae=Object(c.useState)(!1),re=Object(b.a)(ae,2),oe=re[0],ue=re[1],be=Object(c.useState)(!1),de=Object(b.a)(be,2),Oe=de[0],je=de[1],le=Object(c.useState)(!1),Se=Object(b.a)(le,2),_e=Se[0],pe=Se[1],Te=Object(c.useState)(!1),ve=Object(b.a)(Te,2),he=ve[0],Ee=ve[1],xe=Object(c.useState)(!1),me=Object(b.a)(xe,2),Ce=me[0],fe=me[1],Ae=Object(c.useState)("A valid name is required"),Re=Object(b.a)(Ae,2),Pe=Re[0],Ne=Re[1],De=Object(c.useState)(!1),Ie=Object(b.a)(De,2),ge=Ie[0],Le=Ie[1],ye=Object(c.useState)("A valid name is required"),He=Object(b.a)(ye,2),ke=He[0],Ke=He[1],We=Object(c.useState)(!1),Ue=Object(b.a)(We,2),Fe=Ue[0],Be=Ue[1],we=Object(c.useState)("A valid email is required"),ze=Object(b.a)(we,2),Me=ze[0],Ve=ze[1],Xe=Object(c.useState)(!1),Ge=Object(b.a)(Xe,2),qe=Ge[0],Je=Ge[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a,{onSubmit:function(e){e.preventDefault(),G(!0),function(){var e=Object(u.a)(r.a.mark((function e(){var t,i,c,n,s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=21;break}return"",t={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json"},e.next=6,fetch("https://api.ibm.com/scx/sbs_orgaccess/customer?emailAddress=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_USERNAME,"&_namedQuery=getCustomersByContactEmail"),{headers:t});case 6:return i=e.sent,e.next=9,i.json();case 9:return c=e.sent,n=JSON.parse(c.List[0].Id),e.next=13,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscription?_namedQuery=getSubscriptionByCustomer&customerId=".concat(n),{headers:t});case 13:return i=e.sent,e.next=16,i.json();case 16:c=e.sent,U(Object(o.a)({},c)),G(!1),e.next=29;break;case 21:return e.next=23,fetch("/getmysubscriptions");case 23:return s=e.sent,e.next=26,s.json();case 26:a=e.sent,U(Object(o.a)({},a)),G(!1);case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(0),pe(!0),G(!1);case 35:case"end":return e.stop()}}),e,null,[[0,31]])})));return function(){return e.apply(this,arguments)}}()()},children:Object(f.jsx)("div",{className:"ButtonArea",children:Object(f.jsx)(O.a,{type:"submit",children:" Get My Subscriptions "})})}),Object(f.jsx)(j.a,{active:X,description:"Active loading indicator",withOverlay:!0}),ee&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Invited user to Subscription"}),timeout:9e3,onClose:function(){te(!1)},kind:"success",title:"Success Notification"}),ne&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Revoked Subscriber"}),timeout:9e3,onClose:function(){se(!1)},kind:"success",title:"Success Notification"}),oe&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"User exists in same organization and entitled with specified subscription"}),timeout:5e3,onClose:function(){ue(!1)},kind:"success",title:"Success Notification"}),Oe&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Operation cannot be done"}),timeout:3e3,onClose:function(){je(!1)},title:"Error Notification"}),_e&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Server cannot be reached"}),timeout:3e3,onClose:function(){pe(!1)},title:"Error Notification"}),he&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Fields cannot be empty"}),timeout:3e3,onClose:function(){Ee(!1)},title:"Error Notification"}),W.List&&Object(f.jsx)("div",{className:"TableDisplay",children:W.List&&Object(f.jsx)(p.a,{rows:W.List,headers:[{key:"partnumber",header:"Part Number"},{key:"name",header:"Name"},{key:"numofseats",header:"Number of Available Seats"},{key:"subscrpstate",header:"Subscription State"},{key:"action1",header:"Action"},{key:"action2",header:""}],children:function(e){e.rows;var t=e.headers,i=e.getHeaderProps;return Object(f.jsx)(T.a,{title:"Subscription Results",children:Object(f.jsxs)(v.a,{children:[Object(f.jsx)(h.a,{children:Object(f.jsx)(E.a,{children:t.map((function(e){return Object(f.jsx)(x.a,Object(o.a)(Object(o.a)({},i({header:e})),{},{children:e.header}))}))})}),Object(f.jsx)(m.a,{children:W.List&&W.List.map((function(e,t){return Object(f.jsxs)(E.a,{children:[Object(f.jsx)(C.a,{children:e.PartNumber}),Object(f.jsx)(C.a,{children:e.Name}),Object(f.jsx)(C.a,{children:e.NumberOfAvailableSeats}),Object(f.jsx)(C.a,{children:e.SubscriptionState}),Object(f.jsx)(C.a,{children:Object(f.jsx)(S.a,{onClick:function(){return t=e.Id,G(!0),void function(){var e=Object(u.a)(r.a.mark((function e(){var i,c,n,s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=14;break}return i={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json"},e.next=6,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber?subscriptionId=".concat(t,"&_namedQuery=getSubscriberListBySubscription"),{headers:i});case 6:return c=e.sent,e.next=9,c.json();case 9:n=e.sent,z(Object(o.a)({},n)),G(!1),e.next=22;break;case 14:return e.next=16,fetch("/getSubscribers?id="+t);case 16:return s=e.sent,e.next=19,s.json();case 19:a=e.sent,z(Object(o.a)({},a)),G(!1);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),pe(!0),G(!1);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}()();var t},children:"Get Subscribers"})}),Object(f.jsx)(C.a,{children:Object(f.jsx)(S.a,{onClick:function(){return t=e.Id,Q(!0),void H(t);var t},children:"Invite to Subscription"})})]},t)}))})]})})}})}),w.List&&Object(f.jsx)("div",{className:"TableDisplay",children:w.List&&Object(f.jsx)(p.a,{rows:w.List,headers:[{key:"subid",header:"Subscriber ID"},{key:"orgname",header:"Org Name"},{key:"givenname",header:"Given Name"},{key:"substate",header:"Subscriber State"},{key:"revokeaction",header:"Action"}],children:function(e){e.rows;var t=e.headers,i=e.getHeaderProps;return Object(f.jsx)(T.a,{title:"Subscriber Results",children:Object(f.jsxs)(v.a,{children:[Object(f.jsx)(h.a,{children:Object(f.jsx)(E.a,{children:t.map((function(e){return Object(f.jsx)(x.a,Object(o.a)(Object(o.a)({},i({header:e})),{},{children:e.header}))}))})}),Object(f.jsx)(m.a,{children:w.List&&w.List.map((function(e,t){return Object(f.jsxs)(E.a,{children:[Object(f.jsx)(C.a,{children:e.SeatSet[0].SubscriberId}),Object(f.jsx)(C.a,{children:e.Person.OrgName}),Object(f.jsx)(C.a,{children:e.Person.GivenName}),Object(f.jsx)(C.a,{children:e.SubscriberState}),Object(f.jsx)(C.a,{children:Object(f.jsx)(S.a,{onClick:function(){return t=e.SeatSet[0].SubscriberId,i=e.SeatSet[0].Id,G(!0),void function(){var e=Object(u.a)(r.a.mark((function e(){var c,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=13;break}return c={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json"},e.next=6,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber/".concat(t,"/seat/").concat(i),{headers:c,method:"POST"});case 6:return n=e.sent,e.next=9,n;case 9:204===e.sent.status?(se(!0),setTimeout((function(){z({})}),1e3),G(!1)):(je(!0),G(!1)),e.next=20;break;case 13:return e.next=15,fetch("/revokesubscription?subid="+t+"&seatid="+i);case 15:return s=e.sent,e.next=18,s.json();case 18:"success"===e.sent.result?(se(!0),setTimeout((function(){z({})}),1e3),G(!1)):(je(!0),G(!1));case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),pe(!0),G(!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}()();var t,i},children:"Revoke"})})]},t)}))})]})})}})}),Z&&Object(f.jsxs)(d.a,{onSubmit:function(e){(e.preventDefault(),G(!0),i&&A&&D)?(function(){var e=Object(u.a)(r.a.mark((function e(){var t,c,n,s,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=14;break}return"",t={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json","content-type":"application/json"},c={Subscriber:{Person:{GivenName:i,EmailAddress:D,FamilyName:A,RoleSet:["CustomerAdministrator","AppDeveloper"]}}},e.next=7,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber/inviteUser?subscriptionId=".concat(y),{method:"POST",body:JSON.stringify(c),headers:t});case 7:return n=e.sent,e.next=10,n.json();case 10:"User created and entitled in inviter's organization."===(s=e.sent).InviteUser.SuccessMessage?(te(!0),Q(!1),setTimeout((function(){z({})}),1e3),G(!1)):"User exists in same organization and entitled with specified subscription."===s.InviteUser.SuccessMessage?(ue(!0),Q(!1),setTimeout((function(){z({})}),1e3),G(!1)):(je(!0),G(!1)),e.next=21;break;case 14:return e.next=16,fetch("/inviteuser?givenname="+i+"&useremail="+D+"&familyname="+A+"&subspid="+y);case 16:return a=e.sent,e.next=19,a.json();case 19:"User created and entitled in inviter's organization."===(o=e.sent).InviteUser.SuccessMessage?(te(!0),Q(!1),setTimeout((function(){z({})}),1e3),G(!1)):"User exists in same organization and entitled with specified subscription."===o.InviteUser.SuccessMessage?(ue(!0),Q(!1),setTimeout((function(){z({})}),1e3),G(!1)):(je(!0),G(!1));case 21:e.next=28;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0),pe(!0),G(!1);case 28:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}()(),n(""),R(""),I("")):(Ee(!0),G(!1))},children:[Object(f.jsxs)("div",{className:"TextArea",children:[Object(f.jsx)(_.a,{type:"text",id:"gname",invalid:Ce,invalidText:Pe,labelText:"Given Name*",placeholder:"Given Name",size:"lg",value:i,onChange:function(e){e.target.value.match(/^[a-zA-Z]+$/)?(fe(!1),Je(!1)):(fe(!0),Ne("Only letters allowed. No special characters or numbers"),Je(!0)),n(e.target.value)}})," ",Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{className:"TextArea",children:[Object(f.jsx)(_.a,{type:"text",id:"fname",invalid:ge,invalidText:ke,labelText:"Family Name*",placeholder:"Family Name",size:"lg",value:A,onChange:function(e){e.target.value.match(/^[a-zA-Z]+$/)?(Le(!1),Je(!1)):(Le(!0),Ke("Only letters allowed. No special characters or numbers"),Je(!0)),R(e.target.value)}})," ",Object(f.jsx)("br",{})]}),Object(f.jsx)("div",{className:"TextArea",children:Object(f.jsx)(_.a,{type:"text",id:"email",invalid:Fe,invalidText:Me,labelText:"Email Address*",placeholder:"Email address",size:"lg",value:D,onChange:function(e){e.target.value.match(/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/)?(Be(!1),Je(!1)):(Be(!0),Ve("Valid Email format required"),Je(!0)),I(e.target.value)}})}),Object(f.jsx)("div",{className:"ButtonArea",children:Object(f.jsx)(O.a,{type:"submit",disabled:qe,children:" Invite "})})]})]})},R=i(62);var P=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.Header,{"aria-label":"IBM",children:Object(f.jsx)(R.HeaderName,{prefix:"",href:"#",children:Object(f.jsx)("div",{Style:"white-space: nowrap;",children:"SaaS User Subscription and Management Sample Application"})})}),Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"AppContent",children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("h2",{children:"Subscription for OrgAccess "}),Object(f.jsx)(A,{})]})})]})};i(126),i(127);s.a.render(Object(f.jsx)(P,{}),document.getElementById("root"))},80:function(e,t,i){}},[[128,1,2]]]);
//# sourceMappingURL=main.a166dc8d.chunk.js.map