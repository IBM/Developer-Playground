(this["webpackJsonpssm-app"]=this["webpackJsonpssm-app"]||[]).push([[0],{126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){"use strict";c.r(t);var i=c(0),n=c(35),s=c.n(n),a=(c(80),c(27)),r=c.n(a),o=c(28),b=c(43),u=c(20),d=c(132),O=c(138),j=c(133),l=c(137),S=c(134),_=c(136),p=c(135),h=c(57),x=c(55),T=c(58),v=c(60),E=c(59),m=c(56),C=c(33),f=c(15);var A=function(){var e=Object(i.useState)(""),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(i.useState)(""),a=Object(u.a)(s,2),A=a[0],R=a[1],P=Object(i.useState)(""),N=Object(u.a)(P,2),D=N[0],I=N[1],g=Object(i.useState)(""),L=Object(u.a)(g,2),y=L[0],H=L[1],k=Object(i.useState)(""),K=Object(u.a)(k,2),W=K[0],U=K[1],F=Object(i.useState)({}),B=Object(u.a)(F,2),w=B[0],z=B[1],M=Object(i.useState)({}),V=Object(u.a)(M,2),X=V[0],G=V[1],q=Object(i.useState)(!1),J=Object(u.a)(q,2),Z=J[0],Q=J[1],$=Object(i.useState)(!1),Y=Object(u.a)($,2),ee=Y[0],te=Y[1],ce=Object(i.useState)(!1),ie=Object(u.a)(ce,2),ne=ie[0],se=ie[1],ae=Object(i.useState)(!1),re=Object(u.a)(ae,2),oe=re[0],be=re[1],ue=Object(i.useState)(!1),de=Object(u.a)(ue,2),Oe=de[0],je=de[1],le=Object(i.useState)(!1),Se=Object(u.a)(le,2),_e=Se[0],pe=Se[1],he=Object(i.useState)(!1),xe=Object(u.a)(he,2),Te=xe[0],ve=xe[1],Ee=Object(i.useState)(!1),me=Object(u.a)(Ee,2),Ce=me[0],fe=me[1],Ae=Object(i.useState)(!1),Re=Object(u.a)(Ae,2),Pe=Re[0],Ne=Re[1],De=Object(i.useState)("A valid name is required"),Ie=Object(u.a)(De,2),ge=Ie[0],Le=Ie[1],ye=Object(i.useState)(!1),He=Object(u.a)(ye,2),ke=He[0],Ke=He[1],We=Object(i.useState)("A valid name is required"),Ue=Object(u.a)(We,2),Fe=Ue[0],Be=Ue[1],we=Object(i.useState)(!1),ze=Object(u.a)(we,2),Me=ze[0],Ve=ze[1],Xe=Object(i.useState)("A valid email is required"),Ge=Object(u.a)(Xe,2),qe=Ge[0],Je=Ge[1],Ze=Object(i.useState)(!1),Qe=Object(u.a)(Ze,2),$e=Qe[0],Ye=Qe[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(d.a,{onSubmit:function(e){e.preventDefault(),Q(!0),function(){var e=Object(b.a)(r.a.mark((function e(){var t,c,i,n,s,a,b,u,d,O,j,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=25;break}return"",t={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json"},e.next=6,fetch("https://api.ibm.com/scx/sbs_orgaccess/customer?emailAddress=".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_USERNAME,"&_namedQuery=getCustomersByContactEmail"),{headers:t});case 6:return c=e.sent,e.next=9,c.json();case 9:return i=e.sent,n=JSON.parse(i.List[0].Id),s=i.List[0].Organization.OrgName,a=i.List[0].Owner,U(s+" : "+a),e.next=17,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscription?_namedQuery=getSubscriptionByCustomer&customerId=".concat(n),{headers:t});case 17:return c=e.sent,e.next=20,c.json();case 20:i=e.sent,z(Object(o.a)({},i)),Q(!1),e.next=43;break;case 25:return e.next=27,fetch("/getcustomerdetails");case 27:return b=e.sent,e.next=30,b.json();case 30:return u=e.sent,d=u.List[0].Organization.OrgName,O=u.List[0].Owner,U(d+" : "+O),e.next=37,fetch("/getmysubscriptions");case 37:return j=e.sent,e.next=40,j.json();case 40:l=e.sent,z(Object(o.a)({},l)),Q(!1);case 43:e.next=49;break;case 45:e.prev=45,e.t0=e.catch(0),ve(!0),Q(!1);case 49:case"end":return e.stop()}}),e,null,[[0,45]])})));return function(){return e.apply(this,arguments)}}()()},children:Object(f.jsx)("div",{className:"ButtonArea",children:Object(f.jsx)(O.a,{type:"submit",children:" Get My Subscriptions "})})}),W&&Object(f.jsx)("h2",{children:W}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)(j.a,{active:Z,description:"Active loading indicator",withOverlay:!0}),ne&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Invited user to Subscription"}),timeout:9e3,onClose:function(){se(!1)},kind:"success",title:"Success Notification"}),oe&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Revoked Subscriber"}),timeout:9e3,onClose:function(){be(!1)},kind:"success",title:"Success Notification"}),Oe&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"User exists in same organization and entitled with specified subscription"}),timeout:5e3,onClose:function(){je(!1)},kind:"success",title:"Success Notification"}),_e&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Operation cannot be done"}),timeout:3e3,onClose:function(){pe(!1)},title:"Error Notification"}),Te&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Server cannot be reached"}),timeout:3e3,onClose:function(){ve(!1)},title:"Error Notification"}),Ce&&Object(f.jsx)(l.a,{iconDescription:"Close notification",subtitle:Object(f.jsx)("span",{children:"Fields cannot be empty"}),timeout:3e3,onClose:function(){fe(!1)},title:"Error Notification"}),w.List&&Object(f.jsx)("div",{className:"TableDisplay",children:w.List&&Object(f.jsx)(p.a,{rows:w.List,headers:[{key:"partnumber",header:"Part Number"},{key:"name",header:"Name"},{key:"numofseats",header:"Number of Available Seats"},{key:"subscrpstate",header:"Subscription State"},{key:"action1",header:"Action"},{key:"action2",header:""}],children:function(e){e.rows;var t=e.headers,c=e.getHeaderProps;return Object(f.jsx)(h.a,{title:"Subscription Results",children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(T.a,{children:Object(f.jsx)(v.a,{children:t.map((function(e){return Object(f.jsx)(E.a,Object(o.a)(Object(o.a)({},c({header:e})),{},{children:e.header}))}))})}),Object(f.jsx)(m.a,{children:w.List&&w.List.map((function(e,t){return Object(f.jsxs)(v.a,{children:[Object(f.jsx)(C.a,{children:e.PartNumber}),Object(f.jsx)(C.a,{children:e.Name}),Object(f.jsx)(C.a,{children:e.NumberOfAvailableSeats}),Object(f.jsx)(C.a,{children:e.SubscriptionState}),Object(f.jsx)(C.a,{children:Object(f.jsx)(S.a,{onClick:function(){return t=e.Id,Q(!0),void function(){var e=Object(b.a)(r.a.mark((function e(){var c,i,n,s,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=14;break}return c={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json"},e.next=6,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber?subscriptionId=".concat(t,"&_namedQuery=getSubscriberListBySubscription"),{headers:c});case 6:return i=e.sent,e.next=9,i.json();case 9:n=e.sent,G(Object(o.a)({},n)),Q(!1),e.next=22;break;case 14:return e.next=16,fetch("/getSubscribers?id="+t);case 16:return s=e.sent,e.next=19,s.json();case 19:a=e.sent,G(Object(o.a)({},a)),Q(!1);case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(0),ve(!0),Q(!1);case 28:case"end":return e.stop()}}),e,null,[[0,24]])})));return function(){return e.apply(this,arguments)}}()();var t},children:"Get Subscribers"})}),Object(f.jsx)(C.a,{children:Object(f.jsx)(S.a,{onClick:function(){return t=e.Id,te(!0),void H(t);var t},children:"Invite to Subscription"})})]},t)}))})]})})}})}),X.List&&Object(f.jsx)("div",{className:"TableDisplay",children:X.List&&Object(f.jsx)(p.a,{rows:X.List,headers:[{key:"subid",header:"Subscriber ID"},{key:"orgname",header:"Org Name"},{key:"givenname",header:"Given Name"},{key:"substate",header:"Subscriber State"},{key:"revokeaction",header:"Action"}],children:function(e){e.rows;var t=e.headers,c=e.getHeaderProps;return Object(f.jsx)(h.a,{title:"Subscriber Results",children:Object(f.jsxs)(x.a,{children:[Object(f.jsx)(T.a,{children:Object(f.jsx)(v.a,{children:t.map((function(e){return Object(f.jsx)(E.a,Object(o.a)(Object(o.a)({},c({header:e})),{},{children:e.header}))}))})}),Object(f.jsx)(m.a,{children:X.List&&X.List.map((function(e,t){return Object(f.jsxs)(v.a,{children:[Object(f.jsx)(C.a,{children:e.SeatSet[0].SubscriberId}),Object(f.jsx)(C.a,{children:e.Person.OrgName}),Object(f.jsx)(C.a,{children:e.Person.GivenName}),Object(f.jsx)(C.a,{children:e.SubscriberState}),Object(f.jsx)(C.a,{children:Object(f.jsx)(S.a,{onClick:function(){return t=e.SeatSet[0].SubscriberId,c=e.SeatSet[0].Id,Q(!0),void function(){var e=Object(b.a)(r.a.mark((function e(){var i,n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=13;break}return i={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json"},e.next=6,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber/".concat(t,"/seat/").concat(c),{headers:i,method:"POST"});case 6:return n=e.sent,e.next=9,n;case 9:204===e.sent.status?(be(!0),setTimeout((function(){G({})}),1e3),Q(!1)):(pe(!0),Q(!1)),e.next=20;break;case 13:return e.next=15,fetch("/revokesubscription?subid="+t+"&seatid="+c);case 15:return s=e.sent,e.next=18,s.json();case 18:"success"===e.sent.result?(be(!0),setTimeout((function(){G({})}),1e3),Q(!1)):(pe(!0),Q(!1));case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),ve(!0),Q(!1);case 26:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(){return e.apply(this,arguments)}}()();var t,c},children:"Revoke"})})]},t)}))})]})})}})}),ee&&Object(f.jsxs)(d.a,{onSubmit:function(e){(e.preventDefault(),Q(!0),c&&A&&D)?(function(){var e=Object(b.a)(r.a.mark((function e(){var t,i,n,s,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"dev"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_mode){e.next=14;break}return"",t={"X-IBM-Client-Id":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_ID,"X-IBM-Client-Secret":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CLIENT_SECRET,Authorization:"",accept:"application/json","content-type":"application/json"},i={Subscriber:{Person:{GivenName:c,EmailAddress:D,FamilyName:A,RoleSet:["CustomerAdministrator","AppDeveloper"]}}},e.next=7,fetch("https://api.ibm.com/scx/run/sbs_orgaccess/subscriber/inviteUser?subscriptionId=".concat(y),{method:"POST",body:JSON.stringify(i),headers:t});case 7:return n=e.sent,e.next=10,n.json();case 10:"User created and entitled in inviter's organization."===(s=e.sent).InviteUser.SuccessMessage?(se(!0),te(!1),setTimeout((function(){G({})}),1e3),Q(!1)):"User exists in same organization and entitled with specified subscription."===s.InviteUser.SuccessMessage?(je(!0),te(!1),setTimeout((function(){G({})}),1e3),Q(!1)):(pe(!0),Q(!1)),e.next=21;break;case 14:return e.next=16,fetch("/inviteuser?givenname="+c+"&useremail="+D+"&familyname="+A+"&subspid="+y);case 16:return a=e.sent,e.next=19,a.json();case 19:"User created and entitled in inviter's organization."===(o=e.sent).InviteUser.SuccessMessage?(se(!0),te(!1),setTimeout((function(){G({})}),1e3),Q(!1)):"User exists in same organization and entitled with specified subscription."===o.InviteUser.SuccessMessage?(je(!0),te(!1),setTimeout((function(){G({})}),1e3),Q(!1)):(pe(!0),Q(!1));case 21:e.next=28;break;case 23:e.prev=23,e.t0=e.catch(0),console.log(e.t0),ve(!0),Q(!1);case 28:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(){return e.apply(this,arguments)}}()(),n(""),R(""),I("")):(fe(!0),Q(!1))},children:[Object(f.jsxs)("div",{className:"TextArea",children:[Object(f.jsx)(_.a,{type:"text",id:"gname",invalid:Pe,invalidText:ge,labelText:"Given Name*",placeholder:"Given Name",size:"lg",value:c,onChange:function(e){e.target.value.match(/^[a-zA-Z]+$/)?(Ne(!1),Ye(!1)):(Ne(!0),Le("Only letters allowed. No special characters or numbers"),Ye(!0)),n(e.target.value)}})," ",Object(f.jsx)("br",{})]}),Object(f.jsxs)("div",{className:"TextArea",children:[Object(f.jsx)(_.a,{type:"text",id:"fname",invalid:ke,invalidText:Fe,labelText:"Family Name*",placeholder:"Family Name",size:"lg",value:A,onChange:function(e){e.target.value.match(/^[a-zA-Z]+$/)?(Ke(!1),Ye(!1)):(Ke(!0),Be("Only letters allowed. No special characters or numbers"),Ye(!0)),R(e.target.value)}})," ",Object(f.jsx)("br",{})]}),Object(f.jsx)("div",{className:"TextArea",children:Object(f.jsx)(_.a,{type:"text",id:"email",invalid:Me,invalidText:qe,labelText:"Email Address*",placeholder:"Email address",size:"lg",value:D,onChange:function(e){e.target.value.match(/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9.-]+$/)?(Ve(!1),Ye(!1)):(Ve(!0),Je("Valid Email format required"),Ye(!0)),I(e.target.value)}})}),Object(f.jsx)("div",{className:"ButtonArea",children:Object(f.jsx)(O.a,{type:"submit",disabled:$e,children:" Invite "})})]})]})},R=c(62);var P=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(R.Header,{"aria-label":"IBM",children:Object(f.jsx)(R.HeaderName,{prefix:"",href:"#",children:Object(f.jsx)("div",{Style:"white-space: nowrap;",children:"SaaS User Subscription and Management Sample Application"})})}),Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)("div",{className:"AppContent",children:[Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("h2",{children:"Subscription for OrgAccess "}),Object(f.jsx)(A,{})]})})]})};c(126),c(127);s.a.render(Object(f.jsx)(P,{}),document.getElementById("root"))},80:function(e,t,c){}},[[128,1,2]]]);
//# sourceMappingURL=main.df74b5cf.chunk.js.map