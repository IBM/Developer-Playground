{"version":3,"file":"gradient-utils.js","sourceRoot":"","sources":["gradient-utils.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,mBAAmB;AACnB,OAAO,EAAE,OAAO,EAAE,MAAM,YAAY,CAAC;AAGrC;IAAmC,iCAAO;IAA1C;;IAqEA,CAAC;IApEO,0CAA4B,GAAnC,UAAoC,OAAO;QAC1C,IAAI,EAAE,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,yBAAuB,OAAO,CAAC,EAAI,CAAC,CAAC;QACjE,IAAI,EAAE,CAAC,KAAK,EAAE,EAAE;YACf,EAAE,GAAG,OAAO,CAAC,GAAG;iBACd,MAAM,CAAC,MAAM,CAAC;iBACd,MAAM,CAAC,gBAAgB,CAAC;iBACxB,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC;iBACtB,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC;iBACtB,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC;iBACtB,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC;iBACtB,IAAI,CAAC,IAAI,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC;SACzB;QAED,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,EAAE,CAAC;QAC9B,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC;aAClB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;aACnB,KAAK,EAAE;aACP,MAAM,CAAC,MAAM,CAAC;aACd,IAAI,CAAC,QAAQ,EAAE,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,MAAM,EAAR,CAAQ,CAAC;aAC/B,KAAK,CAAC,YAAY,EAAE,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,KAAK,EAAP,CAAO,CAAC;aACnC,KAAK,CAAC,cAAc,EAAE,UAAC,CAAC,IAAK,OAAA,CAAC,CAAC,OAAO,EAAT,CAAS,CAAC,CAAC;IAC3C,CAAC;IAEM,4BAAc,GAArB,UAAsB,MAAM;QAC3B,IAAM,WAAW,GAChB,CACC,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAC/B,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QACpB,OAAO,WAAW,CAAC;IACpB,CAAC;IAEM,sBAAQ,GAAf,UAAgB,MAAM,EAAE,KAAK;QAC5B,IAAM,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QAClD,IAAI,KAAK,GAAa;YACrB;gBACC,MAAM,EAAE,IAAI;gBACZ,KAAK,EAAE,KAAK;gBACZ,OAAO,EAAE,KAAK;aACd;YACD;gBACC,MAAM,EAAE,KAAK;gBACb,KAAK,EAAE,KAAK;gBACZ,OAAO,EAAE,GAAG;aACZ;SACD,CAAC;QAEF,IAAI,UAAU,EAAE;YACf,KAAK,GAAG;gBACP;oBACC,MAAM,EAAE,IAAI;oBACZ,KAAK,EAAE,KAAK;oBACZ,OAAO,EAAE,KAAK;iBACd;gBACD;oBACC,MAAM,EAAE,aAAa,CAAC,cAAc,CAAC,MAAM,CAAC;oBAC5C,KAAK,EAAE,KAAK;oBACZ,OAAO,EAAE,GAAG;iBACZ;gBACD;oBACC,MAAM,EAAE,MAAM;oBACd,KAAK,EAAE,KAAK;oBACZ,OAAO,EAAE,KAAK;iBACd;aACD,CAAC;SACF;QACD,OAAO,KAAK,CAAC;IACd,CAAC;IACF,oBAAC;AAAD,CAAC,AArED,CAAmC,OAAO,GAqEzC","sourcesContent":["// Internal Imports\nimport { Service } from '../service';\nimport { DOMUtils } from '../';\n\nexport class GradientUtils extends Service {\n\tstatic appendOrUpdateLinearGradient(configs) {\n\t\tlet lg = configs.svg.select(`defs linearGradient#${configs.id}`);\n\t\tif (lg.empty()) {\n\t\t\tlg = configs.svg\n\t\t\t\t.append('defs')\n\t\t\t\t.append('linearGradient')\n\t\t\t\t.attr('id', configs.id)\n\t\t\t\t.attr('x1', configs.x1)\n\t\t\t\t.attr('x2', configs.x2)\n\t\t\t\t.attr('y1', configs.y1)\n\t\t\t\t.attr('y2', configs.y2);\n\t\t}\n\n\t\tlg.selectAll('stop').remove();\n\t\tlg.selectAll('stop')\n\t\t\t.data(configs.stops)\n\t\t\t.enter()\n\t\t\t.append('stop')\n\t\t\t.attr('offset', (d) => d.offset)\n\t\t\t.style('stop-color', (d) => d.color)\n\t\t\t.style('stop-opacity', (d) => d.opacity);\n\t}\n\n\tstatic getOffsetRatio(domain) {\n\t\tconst offsetRatio =\n\t\t\t(\n\t\t\t\t(Math.abs(domain[1]) * 100) /\n\t\t\t\tMath.abs(domain[0] - domain[1])\n\t\t\t).toFixed(2) + '%';\n\t\treturn offsetRatio;\n\t}\n\n\tstatic getStops(domain, color) {\n\t\tconst need3Stops = domain[0] < 0 && domain[1] > 0;\n\t\tlet stops: object[] = [\n\t\t\t{\n\t\t\t\toffset: '0%',\n\t\t\t\tcolor: color,\n\t\t\t\topacity: '0.6',\n\t\t\t},\n\t\t\t{\n\t\t\t\toffset: '80%',\n\t\t\t\tcolor: color,\n\t\t\t\topacity: '0',\n\t\t\t},\n\t\t];\n\n\t\tif (need3Stops) {\n\t\t\tstops = [\n\t\t\t\t{\n\t\t\t\t\toffset: '0%',\n\t\t\t\t\tcolor: color,\n\t\t\t\t\topacity: '0.6',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\toffset: GradientUtils.getOffsetRatio(domain),\n\t\t\t\t\tcolor: color,\n\t\t\t\t\topacity: '0',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\toffset: '100%',\n\t\t\t\t\tcolor: color,\n\t\t\t\t\topacity: '0.6',\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\t\treturn stops;\n\t}\n}\n"]}